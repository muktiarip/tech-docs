(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{357:function(a,t,s){"use strict";s.r(t);var n=s(42),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[a._v("#")]),a._v(" Docker")]),a._v(" "),s("h2",{attrs:{id:"build-base-container-image-for-python-application"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-base-container-image-for-python-application"}},[a._v("#")]),a._v(" Build Base Container Image For Python Application")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("Note")]),a._v(" "),s("p",[a._v("Make sure "),s("code",[a._v("runc")]),a._v(" is in your path:"),s("br"),a._v(" "),s("code",[a._v("export PATH=${PATH}:/usr/lib/cri-o-runc/sbin")])])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("container")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("buildah from alpine:latest"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\nbuildah run "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" -- apk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" --update --no-cache python3 py3-paho-mqtt "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  py3-flask py3-cryptography py3-gunicorn\nbuildah run "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" -- pip3 "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --no-cache-dir pymysql python_jwt\nbuildah config --cmd python3 "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\nbuildah commit "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" mypython3\nbuildah "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\n")])])]),s("h2",{attrs:{id:"build-application-image"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-application-image"}},[a._v("#")]),a._v(" Build Application Image")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("container")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("buildah from mypython3:3.7.5"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\nbuildah copy "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" /application/src/ /opt/app/\nbuildah config --port "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\nbuildah config --workingdir /opt/app "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\nbuildah config --cmd "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"gunicorn --bind 0.0.0.0:8000 flask_app:app"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\nbuildah commit "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" myapp\nbuildah "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\n")])])]),s("h2",{attrs:{id:"create-pod-for-grouping-containers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-pod-for-grouping-containers"}},[a._v("#")]),a._v(" Create Pod For Grouping Containers")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("podman pod create --name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("podname -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1880")]),a._v("-9000:1880-9000\n\npodman run --name mariadb -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("secret "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --pod podname "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -v /data/mariadb:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -v /config/my.cnf:/etc/mysql/conf.d/mydocker.cnf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -d mariadb:latest\n\npodman run --name mqtt --pod podname -d eclipse-mosquitto\n\npodman run --name myapp --pod podname -d myapp_image\n")])])]),s("p",[a._v("After that, just use "),s("code",[a._v("podman pod start podname")]),a._v(" and "),s("code",[a._v("podman pod stop podname")]),a._v("\ncommands.")]),a._v(" "),s("h2",{attrs:{id:"delete-left-over-winsz-files-of-podman-stop-command"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete-left-over-winsz-files-of-podman-stop-command"}},[a._v("#")]),a._v(" Delete Left-over "),s("code",[a._v("winsz")]),a._v(" Files of Podman Stop Command")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CONTAINERS_DIR}")]),a._v("/vfs-containers/ -type p -name winsz -exec "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"systemd-unit-file-for-starting-stopping-container-pod"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#systemd-unit-file-for-starting-stopping-container-pod"}},[a._v("#")]),a._v(" Systemd Unit File For Starting/Stopping Container Pod")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('[Unit]\nDescription=Podman in Systemd\n\n[Service]\nRestart=on-failure\nExecStartPre=/usr/bin/rm -f /%t/%n-pid /%t/%n-cid\nExecStart=/usr/bin/podman run --conmon-pidfile  **/%t/%n-pid**  --cidfile /%t/%n-cid -d alpine:latest top\nExecStop=/usr/bin/sh -c "/usr/bin/podman rm -f `cat /%t/%n-cid`"\nKillMode=none\nType=forking\nPIDFile=**/%t/%n-pid**\n\n[Install]\nWantedBy=multi-user.target\n')])])]),s("h2",{attrs:{id:"get-container-id-in-shell-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-container-id-in-shell-script"}},[a._v("#")]),a._v(" Get Container ID in Shell Script")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("containerId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("podman inspect mqtt "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" jq -r "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.[0].Id'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])]),s("h2",{attrs:{id:"run-docker-with-user-privillege"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-docker-with-user-privillege"}},[a._v("#")]),a._v(" Run Docker with user privillege")]),a._v(" "),s("p",[s("code",[a._v("docker run -u $(id -u):$(id -g) args...")])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("docker run --name tf2 -it "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -u "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" -u"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" -g"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -v /data/ml_works/content:/content "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -v /data/ml_works/notebooks:/tf/notebooks "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),a._v(":8888 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  tensorflow/tensorflow:latest-py3-jupyter\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Run /bin/bash as root")]),a._v("\ndocker "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it -u "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0 tf2 "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\ndocker start -i -a tf2\n\n")])])]),s("h2",{attrs:{id:"podman"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#podman"}},[a._v("#")]),a._v(" Podman")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("apk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" --no-cache py3-virtualenv py3-flask py3-pillow py3-gunicorn "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  py3-cryptography py3-jwt py3-paho-mqtt py3-mysqlclient\n\naddgroup -g "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" -S appgroup\nadduser -S -G appgroup -u "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" appuser\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("podman commit --format"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --change "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ENTRYPOINT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/bin/python3 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  my_python3 my_python3\n")])])]),s("h2",{attrs:{id:"mariadb-on-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mariadb-on-docker"}},[a._v("#")]),a._v(" MariaDb on Docker")]),a._v(" "),s("p",[a._v("Run server:")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("podman run --name mariadb --rm -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysecret "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -v /data/mariadb:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -v /config/mydocker.cnf:/etc/mysql/conf.d/mydocker.cnf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(":3306 -d mariadb:latest\n")])])]),s("h2",{attrs:{id:"docker-unifi-base"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-unifi-base"}},[a._v("#")]),a._v(" Docker UniFi Base")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("docker create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("unifi "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PGID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PUID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3478")]),a._v(":3478/udp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10001")]),a._v(":10001/udp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8081")]),a._v(":8081 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8443")]),a._v(":8443 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8843")]),a._v(":8843 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8880")]),a._v(":8880 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6789")]),a._v(":6789 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v unifi_data:/config "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nlinuxserver/unifi\n")])])]),s("h2",{attrs:{id:"docker-host-networking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-host-networking"}},[a._v("#")]),a._v(" Docker Host Networking")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("docker run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--name plex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("host "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TZ")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<timezone>"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PLEX_CLAIM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<claimToken>"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path/to/plex/database"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/config "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path/to/transcode/temp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/transcode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path/to/media"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nplexinc/pms-docker\n")])])]),s("h2",{attrs:{id:"docker-macvlan-networking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-macvlan-networking"}},[a._v("#")]),a._v(" Docker Macvlan Networking")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("docker run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--name plex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("physical "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("IPAddress"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TZ")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<timezone>"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PLEX_CLAIM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<claimToken>"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-h "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("HOSTNAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path/to/plex/database"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/config "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path/to/transcode/temp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/transcode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path/to/media"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nplexinc/pms-docker\n")])])]),s("h2",{attrs:{id:"build-container-image-of-dnsmasq-application"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-container-image-of-dnsmasq-application"}},[a._v("#")]),a._v(" Build Container Image Of "),s("code",[a._v("dnsmasq")]),a._v(" Application")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("container")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("buildah from alpine:latest"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\nbuildah run "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" -- apk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" --update --no-cache dnsmasq\nbuildah config --port "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\nbuildah config --cmd "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"dnsmasq -d"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\nbuildah commit "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v(" dnsmasq\nbuildah "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$container")]),a._v("\n")])])]),s("h2",{attrs:{id:"tensorflow-2-0-docker-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tensorflow-2-0-docker-setup"}},[a._v("#")]),a._v(" Tensorflow 2.0 Docker Setup")]),a._v(" "),s("p",[s("code",[a._v("docker exec -it -u 0:0 tf2 bash")])]),a._v(" "),s("p",[s("code",[a._v("apt update && apt upgrade")])]),a._v(" "),s("p",[s("code",[a._v("apt install git wget protobuf-compiler python3-pil python3-lxml python3-tk")])]),a._v(" "),s("p",[s("code",[a._v("pip install Cython contextlib2 pillow lxml matplotlib pycocotools pandas seaborn sklearn pyyaml h5py")])]),a._v(" "),s("p",[s("code",[a._v("apt install python3-opencv")])]),a._v(" "),s("h2",{attrs:{id:"various-notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#various-notes"}},[a._v("#")]),a._v(" Various Notes")]),a._v(" "),s("ul",[s("li",[a._v("You can start pods using systemd services but you have to add\n"),s("code",[a._v("RemainAfterExit=yes")]),a._v(" to the "),s("code",[a._v("[Service]")]),a._v(" section.")])]),a._v(" "),s("h2",{attrs:{id:"references"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[a._v("#")]),a._v(" References")]),a._v(" "),s("ul",[s("li",[a._v("https://www.redhat.com/sysadmin/podman-shareable-systemd-services")]),a._v(" "),s("li",[a._v("https://github.com/containers/libpod/issues/4433")]),a._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/wsargent/docker-cheat-sheet",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker cheatsheet"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);