(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{366:function(e,t,n){"use strict";n.r(t);var r=n(42),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[e._v("#")]),e._v(" NginX")]),e._v(" "),n("p",[e._v("NginX SSL settings, redirect to HTTPS (except URL for Let's Encrypt\nverification) and protected content using "),n("code",[e._v("X-accell-redirect")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("server {\n        listen 80;\n        server_name m.example.com;\n        server_tokens off;\n        root /var/www/letsencrypt;\n        \n        location /.well-known {\n            try_files $uri $uri/ =404;\n        }\n        \n        location / {\n            return 301 https://$host$request_uri;\n        }\n}\n\nserver {\n        listen 443 ssl;\n        ssl_certificate /config/certs/m.example.com/certificate.pem;\n        ssl_certificate_key /config/certs/m.example.com/privkey2.pem;\n        #ssl_trusted_certificate /config/certs/fullchain.pem;\n        server_name m.example.com;\n        root /data/m.example.com;\n        index index.html;\n\n        location / {\n                try_files $uri $uri/ =404;\n        }\n\n        location /repo {\n                alias /data/s3-bucket/app-content/repo;\n        }\n\n        location /private/ {\n                internal;\n                alias /data/s3-bucket/app-content/protected/;\n        }\n\n        location /api {\n                proxy_set_header Host $http_host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_set_header X-Forwarded-Proto $scheme;\n                proxy_pass http://unix:/tmp/example-api.sock;\n        }\n}\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);